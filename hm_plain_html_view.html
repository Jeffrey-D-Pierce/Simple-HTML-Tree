<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="./images/favicon.ico" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="History Map"
    />
    <title>History Map</title>
    <script src="./src/main.js" type="module"></script>
    <script src="./src/scale_control.js"></script>
    <script src="./src/drag_control.js"></script>
    <link href="./src/main.css" rel="stylesheet" />
  </head>
  <body>
    <select name="example-data" id="example-data-select">
      <option value="3">Constraints</option>
      <option value="0">HTML</option>
      <option value="1">Example</option>
      <option value="2">CCC</option>
    </select>
    <select name="options" id="options-select">
      <option value="0">Horizontal</option>
      <option value="1">Vertical</option>
      <option value="2">Centered</option>
    </select>
    <!-- Slider element -->
    <div>
      <input type="range" id="scale-slider" min="10" max="300" value="100">

      <!-- Display the value -->
      <div id="slider-value">Current Value: 100</div>
    </div>
    <div id="root-container">
      <div id="root"  class="css-connector"></div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        HTML_Hierarchy.render({rootElement: "root"})
      })
      var selectElement = document.getElementById('options-select');

      selectElement.addEventListener('change', (event) => {
          var value = event.target.value;
          // Call a function here with the selected value
          HTML_Hierarchy.render({ rootElement: "root", style: value });
      });

      document.getElementById('example-data-select').addEventListener('change', (event) => {
        const items_html=  loadJSON("./items_html.json");
        const items_example=  loadJSON("./items_example.json");
        const items_ccc=  loadJSON("./items_ccc.json");
        let items
        if(event.target.value === "0") {
          items = items_html
        } else if (event.target.value === "1") {
          items = items_example
        } else if (event.target.value === "2") {
          items = items_ccc
        } else {
          items = items_constraints
        }
        HTML_Hierarchy.render({rootElement: "root", items});
      });
      function loadJSON(filename){
        fetch('example.json')
        .then(response => response.json())
        .then(data => {
            return data
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });
      }
        // Select the slider and the value display element
      const slider = document.getElementById('scale-slider');
      const sliderValueDisplay = document.getElementById('slider-value');
      
      // Add an event listener for the 'input' event on the slider
      slider.addEventListener('input', function() {
        // Update the display with the current value of the slider
        sliderValueDisplay.textContent = 'Current Value: ' + this.value;
        // Select the root element
        var rootElement = document.getElementById('root'); // replace 'root' with your actual root element's ID
      
        // Set the scale
        var scaleValue = this.value / 100; // for 80% scale
      
        // Apply the transform style to scale
        // rootElement.style.transform = 'scale(' + scaleValue + ')';
        updateScale(rootElement, scaleValue)
      
      });
      dragControl('root')

      </script>
  </body>
</html>
